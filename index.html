import React, { useState } from 'react';
import { Calendar, Clock, Plus, CheckCircle, Circle, Edit3, Trash2 } from 'lucide-react';

const TaskManager = () => {
  const [activeTab, setActiveTab] = useState('tasks');
  const [projects, setProjects] = useState([
    {
      id: 1,
      name: "Website Redesign",
      priority: "urgent",
      dueDate: "2025-06-15",
      category: "professional",
      hasSequentialTasks: true,
      tasks: [
        { 
          id: 1, 
          name: "Research competitor sites", 
          completed: true, 
          estimatedHours: 2,
          actualHours: 1.5,
          completedAt: "2025-06-01T14:30:00",
          order: 1
        },
        { 
          id: 2, 
          name: "Create wireframes", 
          completed: false, 
          estimatedHours: 4,
          actualHours: 0,
          timeBlocks: [],
          order: 2
        },
        { 
          id: 3, 
          name: "Design mockups", 
          completed: false, 
          estimatedHours: 6,
          actualHours: 0,
          timeBlocks: [],
          order: 3
        }
      ]
    },
    {
      id: 2,
      name: "Kitchen Cabinet Repair",
      priority: "usual",
      dueDate: "2025-06-30",
      category: "home",
      hasSequentialTasks: true,
      tasks: [
        { 
          id: 4, 
          name: "Buy wood stain", 
          completed: false, 
          estimatedHours: 1,
          actualHours: 0,
          timeBlocks: [],
          order: 1
        },
        { 
          id: 5, 
          name: "Sand cabinet doors", 
          completed: false, 
          estimatedHours: 3,
          actualHours: 0,
          timeBlocks: [],
          order: 2
        },
        { 
          id: 6, 
          name: "Apply stain", 
          completed: false, 
          estimatedHours: 2,
          actualHours: 0,
          timeBlocks: [],
          order: 3
        }
      ]
    },
    {
      id: 3,
      name: "Plan Friend Hangout",
      priority: "if you have time",
      dueDate: "2025-06-20",
      category: "social",
      hasSequentialTasks: false,
      tasks: [
        { 
          id: 7, 
          name: "Text group chat", 
          completed: false, 
          estimatedHours: 0.5,
          actualHours: 0,
          timeBlocks: [],
          order: null
        },
        { 
          id: 8, 
          name: "Research activities", 
          completed: false, 
          estimatedHours: 1,
          actualHours: 0,
          timeBlocks: [],
          order: null
        },
        { 
          id: 9, 
          name: "Make reservations", 
          completed: false, 
          estimatedHours: 0.5,
          actualHours: 0,
          timeBlocks: [],
          order: null
        }
      ]
    }
  ]);

  const [workSchedule, setWorkSchedule] = useState({
    monday: { start: '09:00', end: '17:00', enabled: true },
    tuesday: { start: '09:00', end: '17:00', enabled: true },
    wednesday: { start: '09:00', end: '16:00', enabled: true },
    thursday: { start: '09:00', end: '17:00', enabled: true },
    friday: { start: '09:00', end: '15:00', enabled: true },
    saturday: { start: '10:00', end: '14:00', enabled: false },
    sunday: { start: '10:00', end: '14:00', enabled: false }
  });

  const [showNewProject, setShowNewProject] = useState(false);
  const [newProject, setNewProject] = useState({
    name: '',
    priority: 'usual',
    dueDate: '',
    category: 'professional',
    hasSequentialTasks: false,
    tasks: []
  });

  const priorityColors = {
    'immediate': 'bg-red-100 text-red-800 border-red-200',
    'urgent': 'bg-orange-100 text-orange-800 border-orange-200',
    'usual': 'bg-blue-100 text-blue-800 border-blue-200',
    'if you have time': 'bg-green-100 text-green-800 border-green-200',
    'do whenever': 'bg-gray-100 text-gray-800 border-gray-200'
  };

  const categoryColors = {
    'professional': 'bg-purple-50 border-l-purple-400',
    'personal': 'bg-blue-50 border-l-blue-400',
    'home': 'bg-green-50 border-l-green-400',
    'social': 'bg-pink-50 border-l-pink-400'
  };

  const completeTask = (taskId) => {
    const now = new Date();
    setProjects(prevProjects => 
      prevProjects.map(project => ({
        ...project,
        tasks: project.tasks.map(task => {
          if (task.id === taskId) {
            // Calculate actual hours from scheduled blocks
            const scheduledHours = task.timeBlocks ? task.timeBlocks.length * 2 : 2;
            return {
              ...task,
              completed: true,
              actualHours: scheduledHours,
              completedAt: now.toISOString(),
              timeBlocks: []
            };
          }
          return task;
        })
      }))
    );
    
    // Auto-regenerate schedule when task is completed
    setLastCommitted(null); // Reset commit status to show schedule needs updating
  };

  // Helper function to get available tasks (respects dependencies)
  const getAvailableTasks = (project) => {
    if (!project.hasSequentialTasks) {
      return project.tasks.filter(task => !task.completed);
    }
    
    // For sequential projects, only return tasks that can be worked on now
    const incompleteTasks = project.tasks.filter(task => !task.completed);
    if (incompleteTasks.length === 0) return [];
    
    // Sort by order and return only the first incomplete task
    const sortedTasks = incompleteTasks.sort((a, b) => (a.order || 999) - (b.order || 999));
    return [sortedTasks[0]];
  };

  // Mock schedule generation with dependency logic
  const generateSchedule = () => {
    const schedule = [];
    const today = new Date();
    
    // Get all available tasks (respecting dependencies)
    const allTasks = [];
    projects.forEach(project => {
      const availableTasks = getAvailableTasks(project);
      availableTasks.forEach(task => {
        const blocksNeeded = Math.ceil(task.estimatedHours / 2);
        for (let i = 0; i < blocksNeeded; i++) {
          allTasks.push({
            ...task,
            projectName: project.name,
            projectPriority: project.priority,
            projectHasSequence: project.hasSequentialTasks,
            blockNumber: i + 1,
            totalBlocks: blocksNeeded
          });
        }
      });
    });
    
    // Sort by priority
    const priorityOrder = ['immediate', 'urgent', 'usual', 'if you have time', 'do whenever'];
    allTasks.sort((a, b) => {
      const aPriority = priorityOrder.indexOf(a.projectPriority);
      const bPriority = priorityOrder.indexOf(b.projectPriority);
      return aPriority - bPriority;
    });
    
    let taskIndex = 0;
    
    for (let i = 0; i < 7; i++) {
      const date = new Date(today);
      date.setDate(today.getDate() + i);
      const dayName = date.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
      
      if (workSchedule[dayName]?.enabled) {
        const startHour = parseInt(workSchedule[dayName].start.split(':')[0]);
        const endHour = parseInt(workSchedule[dayName].end.split(':')[0]);
        const workHours = endHour - startHour;
        const slots = Math.floor(workHours / 2);
        
        const daySchedule = {
          date: date.toLocaleDateString(),
          dayName: dayName.charAt(0).toUpperCase() + dayName.slice(1),
          slots: []
        };
        
        for (let slot = 0; slot < slots; slot++) {
          const slotStart = startHour + (slot * 2);
          const slotEnd = slotStart + 2;
          
          let slotTask = null;
          if (taskIndex < allTasks.length) {
            slotTask = allTasks[taskIndex];
            taskIndex++;
          }
          
          daySchedule.slots.push({
            time: `${slotStart}:00 - ${slotEnd}:00`,
            task: slotTask ? slotTask.name : 'Open slot',
            taskId: slotTask ? slotTask.id : null,
            project: slotTask ? slotTask.projectName : null,
            priority: slotTask ? slotTask.projectPriority : null,
            blockInfo: slotTask ? `Block ${slotTask.blockNumber} of ${slotTask.totalBlocks}` : null,
            isSequential: slotTask ? slotTask.projectHasSequence : false,
            taskOrder: slotTask ? slotTask.order : null
          });
        }
        
        schedule.push(daySchedule);
      }
    }
    
    return schedule;
  };

  const [commitDays, setCommitDays] = useState(3);
  const [lastCommitted, setLastCommitted] = useState(null);

  const mockSchedule = generateSchedule();

  return (
    <div className="max-w-6xl mx-auto p-3 sm:p-6 bg-gray-50 min-h-screen">
      <header className="mb-6 sm:mb-8">
        <h1 className="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Task Flow Manager</h1>
        <p className="text-sm sm:text-base text-gray-600">ADHD-friendly project organization and calendar integration</p>
      </header>

      {/* Navigation Tabs */}
      <div className="flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-1 mb-6 bg-white rounded-lg p-1 shadow-sm">
        {[
          { id: 'tasks', label: 'Projects & Tasks', shortLabel: 'Tasks', icon: CheckCircle },
          { id: 'schedule', label: 'Generated Schedule', shortLabel: 'Schedule', icon: Calendar },
          { id: 'settings', label: 'Work Hours', shortLabel: 'Hours', icon: Clock }
        ].map(tab => {
          const Icon = tab.icon;
          return (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`flex items-center justify-center sm:justify-start space-x-1 sm:space-x-2 px-2 sm:px-4 py-2 rounded-md font-medium transition-colors flex-1 sm:flex-none ${
                activeTab === tab.id 
                  ? 'bg-blue-100 text-blue-700' 
                  : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'
              }`}
            >
              <Icon size={18} />
              <span className="hidden sm:inline">{tab.label}</span>
              <span className="sm:hidden text-xs">{tab.shortLabel}</span>
            </button>
          );
        })}
      </div>

      {/* Projects & Tasks Tab */}
      {activeTab === 'tasks' && (
        <div className="space-y-4 sm:space-y-6">
          <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0">
            <h2 className="text-xl sm:text-2xl font-semibold text-gray-900">Your Projects</h2>
            <button
              onClick={() => setShowNewProject(true)}
              className="flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto"
            >
              <Plus size={18} />
              <span>Add Project</span>
            </button>
          </div>

          {/* New Project Form */}
          {showNewProject && (
            <div className="bg-white p-4 sm:p-6 rounded-lg shadow-sm border">
              <h3 className="text-lg font-medium mb-4">Add New Project</h3>
              <div className="grid grid-cols-1 gap-4">
                <input
                  type="text"
                  placeholder="Project name"
                  className="border rounded-lg px-3 py-2 w-full"
                  value={newProject.name}
                  onChange={(e) => setNewProject({...newProject, name: e.target.value})}
                />
                
                {/* Sequential Tasks Toggle */}
                <div className="flex items-center space-x-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
                  <input
                    type="checkbox"
                    id="sequential"
                    checked={newProject.hasSequentialTasks}
                    onChange={(e) => setNewProject({...newProject, hasSequentialTasks: e.target.checked})}
                    className="rounded"
                  />
                  <label htmlFor="sequential" className="text-sm text-blue-800 font-medium">
                    Tasks must be completed in order (sequential)
                  </label>
                </div>
                
                <div className="grid grid-cols-2 gap-4">
                  <select
                    className="border rounded-lg px-3 py-2 text-sm"
                    value={newProject.priority}
                    onChange={(e) => setNewProject({...newProject, priority: e.target.value})}
                  >
                    <option value="immediate">Immediate</option>
                    <option value="urgent">Urgent</option>
                    <option value="usual">Usual</option>
                    <option value="if you have time">If You Have Time</option>
                    <option value="do whenever">Do Whenever</option>
                  </select>
                  <select
                    className="border rounded-lg px-3 py-2 text-sm"
                    value={newProject.category}
                    onChange={(e) => setNewProject({...newProject, category: e.target.value})}
                  >
                    <option value="professional">Professional</option>
                    <option value="personal">Personal Interest</option>
                    <option value="home">Home</option>
                    <option value="social">Social</option>
                  </select>
                </div>
                <input
                  type="date"
                  className="border rounded-lg px-3 py-2"
                  value={newProject.dueDate}
                  onChange={(e) => setNewProject({...newProject, dueDate: e.target.value})}
                />
              </div>
              <div className="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 mt-4">
                <button 
                  className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex-1 sm:flex-none"
                  onClick={() => setShowNewProject(false)}
                >
                  Add Project
                </button>
                <button 
                  className="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 flex-1 sm:flex-none"
                  onClick={() => setShowNewProject(false)}
                >
                  Cancel
                </button>
              </div>
            </div>
          )}

          {/* Project Cards */}
          <div className="grid gap-4 sm:gap-6">
            {projects.map(project => (
              <div key={project.id} className={`bg-white rounded-lg shadow-sm border-l-4 p-4 sm:p-6 ${categoryColors[project.category]}`}>
                <div className="flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-3 sm:space-y-0 mb-4">
                  <div className="flex-1">
                    <h3 className="text-lg sm:text-xl font-semibold text-gray-900">{project.name}</h3>
                    <p className="text-sm text-gray-600 mt-1">Due: {new Date(project.dueDate).toLocaleDateString()}</p>
                  </div>
                  <div className="flex flex-wrap items-center gap-2">
                    <span className={`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium border ${priorityColors[project.priority]}`}>
                      {project.priority.charAt(0).toUpperCase() + project.priority.slice(1)}
                    </span>
                    <span className="px-2 sm:px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs sm:text-sm capitalize">
                      {project.category}
                    </span>
                  </div>
                </div>
                
          {/* Project Cards */}
          <div className="grid gap-4 sm:gap-6">
            {projects.map(project => (
              <div key={project.id} className={`bg-white rounded-lg shadow-sm border-l-4 p-4 sm:p-6 ${categoryColors[project.category]}`}>
                <div className="flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-3 sm:space-y-0 mb-4">
                  <div className="flex-1">
                    <div className="flex items-center space-x-2">
                      <h3 className="text-lg sm:text-xl font-semibold text-gray-900">{project.name}</h3>
                      {project.hasSequentialTasks && (
                        <span className="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium">
                          Sequential
                        </span>
                      )}
                    </div>
                    <p className="text-sm text-gray-600 mt-1">Due: {new Date(project.dueDate).toLocaleDateString()}</p>
                  </div>
                  <div className="flex flex-wrap items-center gap-2">
                    <span className={`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium border ${priorityColors[project.priority]}`}>
                      {project.priority.charAt(0).toUpperCase() + project.priority.slice(1)}
                    </span>
                    <span className="px-2 sm:px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs sm:text-sm capitalize">
                      {project.category}
                    </span>
                  </div>
                </div>
                
                <div className="space-y-2">
                  {project.tasks.filter(task => !task.completed).map(task => {
                    const canWork = !project.hasSequentialTasks || getAvailableTasks(project).some(t => t.id === task.id);
                    return (
                      <div key={task.id} className={`flex items-center space-x-3 p-3 rounded-lg ${canWork ? 'bg-gray-50' : 'bg-gray-100 opacity-60'}`}>
                        <div className="flex items-center space-x-2 flex-shrink-0">
                          {project.hasSequentialTasks && task.order && (
                            <span className="bg-blue-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">
                              {task.order}
                            </span>
                          )}
                          <Circle className={`flex-shrink-0 ${canWork ? 'text-gray-400' : 'text-gray-300'}`} size={20} />
                        </div>
                        <div className="flex-1">
                          <span className={`text-sm sm:text-base block ${canWork ? 'text-gray-900' : 'text-gray-500'}`}>
                            {task.name}
                            {!canWork && project.hasSequentialTasks && (
                              <span className="text-xs text-orange-600 ml-2">(waiting for previous task)</span>
                            )}
                          </span>
                          <div className="flex items-center space-x-4 mt-1">
                            <span className="text-xs text-gray-500">
                              Est: {task.estimatedHours}h ({Math.ceil(task.estimatedHours / 2)} blocks)
                            </span>
                            {task.actualHours > 0 && (
                              <span className="text-xs text-blue-600">
                                Time spent: {task.actualHours}h
                              </span>
                            )}
                          </div>
                        </div>
                        {canWork && (
                          <button
                            onClick={() => completeTask(task.id)}
                            className="bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 text-sm font-medium flex-shrink-0"
                          >
                            DONE!
                          </button>
                        )}
                      </div>
                    );
                  })}
                  
                  {/* Completed Tasks */}
                  {project.tasks.filter(task => task.completed).length > 0 && (
                    <div className="mt-4 pt-3 border-t border-gray-200">
                      <h4 className="text-sm font-medium text-gray-700 mb-2">Completed</h4>
                      {project.tasks.filter(task => task.completed).map(task => (
                        <div key={task.id} className="flex items-center space-x-3 p-2 bg-green-50 rounded-lg mb-2">
                          <div className="flex items-center space-x-2 flex-shrink-0">
                            {project.hasSequentialTasks && task.order && (
                              <span className="bg-green-600 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center">
                                {task.order}
                              </span>
                            )}
                            <CheckCircle className="text-green-600 flex-shrink-0" size={16} />
                          </div>
                          <div className="flex-1">
                            <span className="text-gray-600 text-sm line-through">
                              {task.name}
                            </span>
                            <div className="flex items-center space-x-4 mt-1">
                              <span className="text-xs text-gray-500">
                                Est: {task.estimatedHours}h â†’ Actual: {task.actualHours}h
                              </span>
                              <span className="text-xs text-green-600">
                                âœ“ {new Date(task.completedAt).toLocaleDateString()}
                              </span>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
                
                <button className="mt-4 flex items-center space-x-2 text-blue-600 hover:text-blue-700 text-sm">
                  <Plus size={16} />
                  <span>Add Task</span>
                </button>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Schedule Tab */}
      {activeTab === 'schedule' && (
        <div className="space-y-4 sm:space-y-6">
          <div className="flex flex-col space-y-4">
            <h2 className="text-xl sm:text-2xl font-semibold text-gray-900">Your Generated Schedule</h2>
            
            {/* Calendar Commit Controls */}
            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <h3 className="font-medium text-blue-900 mb-3">Commit Schedule to Google Calendar</h3>
              <div className="flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4">
                <div className="flex items-center space-x-2">
                  <label className="text-sm text-blue-800">Schedule next:</label>
                  <select 
                    value={commitDays} 
                    onChange={(e) => setCommitDays(parseInt(e.target.value))}
                    className="border border-blue-300 rounded px-2 py-1 text-sm bg-white"
                  >
                    <option value={1}>1 day</option>
                    <option value={2}>2 days</option>
                    <option value={3}>3 days</option>
                    <option value={4}>4 days</option>
                    <option value={5}>5 days</option>
                    <option value={7}>1 week</option>
                  </select>
                </div>
                <button 
                  className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors w-full sm:w-auto text-sm"
                  onClick={() => setLastCommitted(new Date().toLocaleString())}
                >
                  ðŸ“… Commit to Calendar
                </button>
              </div>
              {lastCommitted && (
                <p className="text-xs text-blue-700 mt-2">
                  Last committed: {lastCommitted} ({commitDays} day{commitDays > 1 ? 's' : ''})
                  {!lastCommitted && <span className="text-orange-600"> - Schedule updated, re-commit to sync changes</span>}
                </p>
              )}
              <p className="text-xs text-blue-600 mt-2">
                ðŸ’¡ Tip: Start with 2-3 days if you're feeling overwhelmed, or schedule a full week when you're in planning mode!
              </p>
            </div>
          </div>
          
          <div className="grid gap-3 sm:gap-4">
            {mockSchedule.slice(0, commitDays).map((day, index) => (
              <div key={index} className={`bg-white rounded-lg shadow-sm p-4 sm:p-6 ${index >= commitDays ? 'opacity-50' : ''}`}>
                <div className="flex justify-between items-center mb-3 sm:mb-4">
                  <h3 className="text-base sm:text-lg font-semibold text-gray-900">
                    {day.dayName} - {day.date}
                  </h3>
                  <span className={`text-xs px-2 py-1 rounded-full ${
                    index < commitDays ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-500'
                  }`}>
                    {index < commitDays ? 'Will be scheduled' : 'Preview only'}
                  </span>
                </div>
                <div className="space-y-2 sm:space-y-3">
                  {day.slots.map((slot, slotIndex) => (
                    <div key={slotIndex} className="flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 bg-gray-50 rounded-lg space-y-2 sm:space-y-0">
                      <div className="flex flex-col sm:flex-row sm:items-center sm:space-x-4 flex-1">
                        <span className="font-medium text-gray-700 text-sm sm:text-base sm:w-24">{slot.time}</span>
                        <div className="flex-1">
                          <span className="text-gray-900 text-sm sm:text-base">{slot.task}</span>
                          {slot.project && (
                            <span className="text-xs sm:text-sm text-gray-600 ml-0 sm:ml-2 block sm:inline">
                              ({slot.project})
                            </span>
                          )}
                          {slot.blockInfo && (
                            <span className="text-xs text-blue-600 block sm:inline sm:ml-2">
                              {slot.blockInfo}
                              {slot.isSequential && slot.taskOrder && (
                                <span className="ml-1 bg-blue-600 text-white text-xs font-bold rounded-full w-4 h-4 inline-flex items-center justify-center">
                                  {slot.taskOrder}
                                </span>
                              )}
                            </span>
                          )}
                        </div>
                      </div>
                      <div className="flex items-center space-x-2">
                        {slot.priority && (
                          <span className={`px-2 py-1 rounded-full text-xs ${priorityColors[slot.priority]}`}>
                            {slot.priority}
                          </span>
                        )}
                        {slot.taskId && (
                          <button
                            onClick={() => completeTask(slot.taskId)}
                            className="bg-green-600 text-white px-2 py-1 rounded text-xs font-medium hover:bg-green-700 flex-shrink-0"
                          >
                            DONE!
                          </button>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            ))}
            
            {/* Preview of additional days */}
            {commitDays < mockSchedule.length && (
              <div className="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                <p className="text-gray-600 text-sm">
                  {mockSchedule.length - commitDays} more day{mockSchedule.length - commitDays > 1 ? 's' : ''} available in preview
                </p>
                <button 
                  className="text-blue-600 hover:text-blue-700 text-sm mt-1"
                  onClick={() => setCommitDays(Math.min(7, commitDays + 1))}
                >
                  Show one more day
                </button>
              </div>
            )}
          </div>
        </div>
      )}

      {/* Work Hours Settings Tab */}
      {activeTab === 'settings' && (
        <div className="space-y-4 sm:space-y-6">
          <h2 className="text-xl sm:text-2xl font-semibold text-gray-900">Work Schedule Settings</h2>
          
          <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
            <h3 className="text-base sm:text-lg font-medium mb-4">Set Your Available Work Hours</h3>
            <div className="space-y-3 sm:space-y-4">
              {Object.entries(workSchedule).map(([day, schedule]) => (
                <div key={day} className="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 p-3 bg-gray-50 rounded-lg">
                  <div className="flex items-center space-x-3 sm:w-32">
                    <input
                      type="checkbox"
                      checked={schedule.enabled}
                      onChange={(e) => setWorkSchedule({
                        ...workSchedule,
                        [day]: { ...schedule, enabled: e.target.checked }
                      })}
                      className="rounded"
                    />
                    <span className="font-medium capitalize text-sm sm:text-base">{day}</span>
                  </div>
                  
                  {schedule.enabled && (
                    <div className="flex items-center space-x-2 ml-6 sm:ml-0">
                      <input
                        type="time"
                        value={schedule.start}
                        onChange={(e) => setWorkSchedule({
                          ...workSchedule,
                          [day]: { ...schedule, start: e.target.value }
                        })}
                        className="border rounded px-2 py-1 text-sm"
                      />
                      <span className="text-sm text-gray-600">to</span>
                      <input
                        type="time"
                        value={schedule.end}
                        onChange={(e) => setWorkSchedule({
                          ...workSchedule,
                          [day]: { ...schedule, end: e.target.value }
                        })}
                        className="border rounded px-2 py-1 text-sm"
                      />
                    </div>
                  )}
                </div>
              ))}
            </div>
            
            <button className="mt-4 sm:mt-6 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 w-full sm:w-auto">
              Save Schedule Settings
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

export default TaskManager;